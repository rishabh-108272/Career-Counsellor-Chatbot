<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Feedback - Career Consulting AI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

    <style>
        /* Star rating styles */
        
        .rating-stars .bi-star-fill,
        .rating-stars .bi-star {
            cursor: pointer;
            font-size: 2rem;
            transition: color 0.3s ease;
        }
        
        .rating-stars .text-primary {
            color: #0d6efd !important;
        }
        
        .rating-stars .bi-star:hover,
        .rating-stars .bi-star-fill:hover,
        .rating-stars .bi-star-fill:hover~.bi-star {
            color: #66a3ff !important;
        }
        /* Form card shadow & border radius */
        
        .card-feedback {
            border-radius: 1rem;
            box-shadow: 0 0.5rem 1rem rgb(13 110 253 / 0.15);
        }
    </style>
</head>

<body class="bg-light text-dark">


    <body class="bg-light text-dark">
        <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
            <div class="container">
                <a class="navbar-brand text-primary fw-bold" href="{% url 'career:home' %}">Pathwise</a>
            </div>
            </div>
        </nav>

        <!-- Hero -->

        <header class="position-relative text-center py-5 overflow-hidden">
            <div class="position-absolute top-0 start-0 w-100 h-100">
                <div class="w-100 h-100" style=" 
                height: 400px;
                background-image: url('https://ggsc.s3.us-west-2.amazonaws.com/assets/images/gettyimages-1416315615_-_abcdef_-_0a21b39134b316e51cdc0dd96c5e6bca3c0093e9_-_abcdef_-_c3aa4369bd53794b17dba2719890b56de8809755.webp');
                background-size: cover;
                background-position: center;
                filter: blur(4px);
                opacity: 0.8;">
                </div>
            </div>

            <div class="position-relative z-1">
                <div class="container bg-white bg-opacity-90 p-3 rounded-3" style="max-width: 700px;">
                    <h1 class="display-4 text-primary">Tell Us What You Think</h1>
                    <p class="lead text-secondary">You shape what we build. Tell us what matters.</p>
                    <a href="{% url 'career:resume_upload' %}" class="btn btn-outline-primary btn-lg mx-2">Upload Resume</a>
                    <a href="{% url 'career:chatbot' %}" class="btn btn-outline-primary btn-lg mx-2">Ask Career Bot</a>
                </div>
            </div>
        </header>
        <!-- Enhanced Feedback Form Section -->
        <section class="container mb-5 mt-5">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-md-10">
                    <div class="card border-0 shadow-lg overflow-hidden">
                        <!-- Form Header with Gradient -->
                        <div class="card-header bg-primary bg-gradient text-white py-4">
                            <div class="text-center">
                                <h2 class="mb-2 fw-bold"><i class="bi bi-chat-square-text me-2"></i> Share Your Feedback</h2>
                                <p class="mb-0 opacity-75">Help us improve your experience</p>
                            </div>
                        </div>

                        <!-- Form Body -->
                        <div class="card-body p-4 p-lg-5">
                            <form id="feedbackForm" novalidate>
                                <!-- Name -->
                                <div class="mb-4">
                                    <label for="name" class="form-label fw-semibold d-flex align-items-center">
                                <i class="bi bi-person me-2 text-primary"></i>Full Name <span class="text-danger ms-1">*</span>
                            </label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light"><i class="bi bi-person-fill text-muted"></i></span>
                                        <input type="text" class="form-control py-3" id="name" placeholder="Your full name" required minlength="2" />
                                    </div>
                                    <div class="invalid-feedback">Please enter your name (at least 2 characters).</div>
                                </div>

                                <!-- Email -->
                                <div class="mb-4">
                                    <label for="email" class="form-label fw-semibold d-flex align-items-center">
                                <i class="bi bi-envelope me-2 text-primary"></i>Email Address <span class="text-danger ms-1">*</span>
                            </label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light"><i class="bi bi-envelope-fill text-muted"></i></span>
                                        <input type="email" class="form-control py-3" id="email" placeholder="name@example.com" required />
                                    </div>
                                    <div class="invalid-feedback">Please provide a valid email address.</div>
                                </div>

                                <!-- Rating -->
                                <div class="mb-4">
                                    <label class="form-label fw-semibold d-flex align-items-center mb-3">
                                <i class="bi bi-star me-2 text-primary"></i>Rate Your Experience <span class="text-danger ms-1">*</span>
                            </label>
                                    <div id="ratingStars" class="rating-stars d-flex justify-content-center gap-1" role="radiogroup" aria-label="Rating">
                                        <i class="bi bi-star-fill fs-1 text-muted" tabindex="0" data-value="1" role="radio" aria-checked="false" aria-label="1 star - poor"></i>
                                        <i class="bi bi-star-fill fs-1 text-muted" tabindex="0" data-value="2" role="radio" aria-checked="false" aria-label="2 stars - fair"></i>
                                        <i class="bi bi-star-fill fs-1 text-muted" tabindex="0" data-value="3" role="radio" aria-checked="false" aria-label="3 stars - good"></i>
                                        <i class="bi bi-star-fill fs-1 text-muted" tabindex="0" data-value="4" role="radio" aria-checked="false" aria-label="4 stars - very good"></i>
                                        <i class="bi bi-star-fill fs-1 text-muted" tabindex="0" data-value="5" role="radio" aria-checked="false" aria-label="5 stars - excellent"></i>
                                    </div>
                                    <div class="d-flex justify-content-between mt-1">
                                        <small class="text-muted">Poor</small>
                                        <small class="text-muted">Excellent</small>
                                    </div>
                                    <input type="hidden" id="rating" name="rating" required />
                                    <div class="invalid-feedback d-block text-center" id="ratingFeedback">Please select a rating.</div>
                                </div>

                                <!-- Category -->
                                <div class="mb-4">
                                    <label for="category" class="form-label fw-semibold d-flex align-items-center">
                                <i class="bi bi-tag me-2 text-primary"></i>Feedback Category <span class="text-danger ms-1">*</span>
                            </label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light"><i class="bi bi-folder-fill text-muted"></i></span>
                                        <select class="form-select py-3" id="category" required>
                                    <option value="" disabled selected>Select a category</option>
                                    <option>Resume Parsing</option>
                                    <option>Skill Analysis</option>
                                    <option>Job Recommendations</option>
                                    <option>Career Bot</option>
                                    <option>General Feedback</option>
                                </select>
                                    </div>
                                    <div class="invalid-feedback">Please select a feedback category.</div>
                                </div>

                                <!-- Comments -->
                                <div class="mb-4">
                                    <label for="comments" class="form-label fw-semibold d-flex align-items-center">
                                <i class="bi bi-chat-left-text me-2 text-primary"></i>Your Feedback <span class="text-danger ms-1">*</span>
                            </label>
                                    <div class="form-floating">
                                        <textarea class="form-control" id="comments" placeholder=" " style="height: 150px" required minlength="10"></textarea>
                                        <label for="comments" class="text-muted">Write your detailed feedback here...</label>
                                    </div>
                                    <div class="invalid-feedback">Please provide at least 10 characters of feedback.</div>
                                    <div class="form-text">Minimum 10 characters required</div>
                                </div>

                                <!-- Submit Button -->
                                <div class="d-grid mt-5">
                                    <button type="submit" class="btn btn-primary btn-lg fw-bold py-3">
                                <i class="bi bi-send-fill me-2"></i>Submit Feedback
                            </button>
                                </div>
                            </form>

                            <!-- Thank You Message -->
                            <div class="alert alert-success mt-4 d-flex align-items-center d-none" id="thankYouMsg" role="alert">
                                <i class="bi bi-check-circle-fill fs-3 me-3"></i>
                                <div>
                                    <h5 class="alert-heading mb-2">Thank you for your feedback!</h5>
                                    <p class="mb-0">We appreciate your time and will use your input to improve our services.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <style>
            /* Custom styling for feedback form */
            
            .rating-stars i {
                cursor: pointer;
                transition: all 0.2s ease;
                color: #e0e0e0;
            }
            
            .rating-stars i:hover,
            .rating-stars i.active {
                color: #ffc107 !important;
                transform: scale(1.1);
            }
            
            .rating-stars i:focus-visible {
                outline: 2px solid #86b7fe;
                outline-offset: 2px;
                border-radius: 4px;
            }
            
            .form-floating label {
                padding-left: 0.5rem;
            }
            
            .form-control:focus,
            .form-select:focus {
                border-color: #86b7fe;
                box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
            }
            
            .input-group-text {
                transition: all 0.2s ease;
            }
            
            .form-control:focus+.input-group-text {
                color: var(--bs-primary) !important;
                background-color: rgba(13, 110, 253, 0.05);
            }
        </style>

        <!-- Footer -->
        <footer class="text-center py-4 bg-white border-top">
            <div class="container">
                <small class="text-muted">© 2025 Career Consulting AI | Built for Learners & Job Seekers</small><br />
                <a href="#" class="text-decoration-none text-muted mx-2">Privacy</a> |
                <a href="#" class="text-decoration-none text-muted mx-2">Terms</a> |
                <a href="#" class="text-decoration-none text-muted mx-2">Contact</a>
            </div>
        </footer>

        <!-- Bootstrap JS Bundle -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Star rating functionality
                const stars = document.querySelectorAll('#ratingStars i');
                const ratingInput = document.getElementById('rating');
                const ratingFeedback = document.getElementById('ratingFeedback');

                stars.forEach(star => {
                    star.addEventListener('click', function() {
                        const value = parseInt(this.getAttribute('data-value'));
                        ratingInput.value = value;

                        // Update star display
                        stars.forEach((s, index) => {
                            if (index < value) {
                                s.classList.add('active');
                                s.setAttribute('aria-checked', 'true');
                            } else {
                                s.classList.remove('active');
                                s.setAttribute('aria-checked', 'false');
                            }
                        });

                        // Hide validation message if present
                        ratingFeedback.style.display = 'none';
                        this.closest('.mb-4').classList.remove('was-validated');
                    });

                    // Keyboard navigation for accessibility
                    star.addEventListener('keydown', function(e) {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            this.click();
                        }
                    });
                });

                // Form validation and submission
                const form = document.getElementById('feedbackForm');
                const thankYouMsg = document.getElementById('thankYouMsg');

                form.addEventListener('submit', function(e) {
                    e.preventDefault();

                    // Validate rating separately
                    if (!ratingInput.value) {
                        ratingFeedback.style.display = 'block';
                        document.getElementById('ratingStars').closest('.mb-4').classList.add('was-validated');
                        return;
                    }

                    if (!form.checkValidity()) {
                        e.stopPropagation();
                        form.classList.add('was-validated');
                        return;
                    }

                    // Simulate form submission
                    form.classList.add('was-validated');
                    form.classList.add('disabled');
                    form.querySelector('button[type="submit"]').innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span> Submitting...';

                    // In a real app, you would submit to your backend here
                    setTimeout(() => {
                        form.reset();
                        form.classList.remove('was-validated', 'disabled');
                        form.querySelector('button[type="submit"]').innerHTML = '<i class="bi bi-send-fill me-2"></i>Submit Feedback';

                        // Reset stars
                        stars.forEach(star => {
                            star.classList.remove('active');
                            star.setAttribute('aria-checked', 'false');
                        });
                        ratingInput.value = '';

                        // Show thank you message
                        thankYouMsg.classList.remove('d-none');
                        setTimeout(() => {
                            thankYouMsg.classList.add('d-none');
                        }, 5000);
                    }, 1500);
                });
            });
        </script>
        <script>
            (() => {
                const ratingStars = document.querySelectorAll('#ratingStars i');
                const ratingInput = document.getElementById('rating');
                const ratingFeedback = document.getElementById('ratingFeedback');
                let selectedRating = 0;

                function setRating(rating) {
                    selectedRating = rating;
                    ratingInput.value = rating;
                    ratingFeedback.style.display = 'none';
                    ratingStars.forEach((star, i) => {
                        if (i < rating) {
                            star.classList.remove('bi-star');
                            star.classList.add('bi-star-fill', 'text-primary');
                            star.setAttribute('aria-checked', 'true');
                        } else {
                            star.classList.remove('bi-star-fill', 'text-primary');
                            star.classList.add('bi-star');
                            star.setAttribute('aria-checked', 'false');
                        }
                    });
                }

                ratingStars.forEach(star => {
                    star.addEventListener('click', () => setRating(parseInt(star.dataset.value)));
                    star.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            setRating(parseInt(star.dataset.value));
                        }
                    });
                    star.addEventListener('mouseover', () => {
                        const hoverVal = parseInt(star.dataset.value);
                        ratingStars.forEach((s, i) => {
                            if (i < hoverVal) s.classList.add('text-primary');
                            else s.classList.remove('text-primary');
                        });
                    });
                    star.addEventListener('mouseout', () => {
                        ratingStars.forEach((s, i) => {
                            if (i < selectedRating) s.classList.add('text-primary');
                            else s.classList.remove('text-primary');
                        });
                    });
                });

                // Form validation and submission
                const form = document.getElementById('feedbackForm');
                form.addEventListener('submit', function(e) {
                    e.preventDefault();

                    if (!form.checkValidity()) {
                        e.stopPropagation();
                        form.classList.add('was-validated');
                    }
                    if (!ratingInput.value) {
                        ratingFeedback.style.display = 'block';
                    }

                    if (form.checkValidity() && ratingInput.value) {
                        // TODO: Integrate with backend API or email service

                        form.classList.remove('was-validated');
                        form.reset();
                        setRating(0);
                        document.getElementById('thankYouMsg').classList.remove('d-none');
                        window.scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });

                        setTimeout(() => {
                            document.getElementById('thankYouMsg').classList.add('d-none');
                        }, 6000);
                    }
                });
            })();
        </script>
    </body>

</html>